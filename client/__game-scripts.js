// hamnmer.min.js
/*! Hammer.JS - v2.0.4 - 2014-09-28
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2014 Jorik Tangelder;
 * Licensed under the MIT license */
!function(a,b,c,d){"use strict";function e(a,b,c){return setTimeout(k(a,c),b)}function f(a,b,c){return Array.isArray(a)?(g(a,c[b],c),!0):!1}function g(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a}function i(a,b){return h(a,b,!0)}function j(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&h(d,c)}function k(a,b){return function(){return a.apply(b,arguments)}}function l(a,b){return typeof a==kb?a.apply(b?b[0]||d:d,b):a}function m(a,b){return a===d?b:a}function n(a,b,c){g(r(b),function(b){a.addEventListener(b,c,!1)})}function o(a,b,c){g(r(b),function(b){a.removeEventListener(b,c,!1)})}function p(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function q(a,b){return a.indexOf(b)>-1}function r(a){return a.trim().split(/\s+/g)}function s(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function t(a){return Array.prototype.slice.call(a,0)}function u(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];s(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function v(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<ib.length;){if(c=ib[g],e=c?c+f:b,e in a)return e;g++}return d}function w(){return ob++}function x(a){var b=a.ownerDocument;return b.defaultView||b.parentWindow}function y(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){l(a.options.enable,[a])&&c.handler(b)},this.init()}function z(a){var b,c=a.options.inputClass;return new(b=c?c:rb?N:sb?Q:qb?S:M)(a,A)}function A(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&yb&&d-e===0,g=b&(Ab|Bb)&&d-e===0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,B(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function B(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=E(b)),e>1&&!c.firstMultiple?c.firstMultiple=E(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=F(d);b.timeStamp=nb(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=J(h,i),b.distance=I(h,i),C(c,b),b.offsetDirection=H(b.deltaX,b.deltaY),b.scale=g?L(g.pointers,d):1,b.rotation=g?K(g.pointers,d):0,D(c,b);var j=a.element;p(b.srcEvent.target,j)&&(j=b.srcEvent.target),b.target=j}function C(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};(b.eventType===yb||f.eventType===Ab)&&(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function D(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Bb&&(i>xb||h.velocity===d)){var j=h.deltaX-b.deltaX,k=h.deltaY-b.deltaY,l=G(i,j,k);e=l.x,f=l.y,c=mb(l.x)>mb(l.y)?l.x:l.y,g=H(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function E(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:lb(a.pointers[c].clientX),clientY:lb(a.pointers[c].clientY)},c++;return{timeStamp:nb(),pointers:b,center:F(b),deltaX:a.deltaX,deltaY:a.deltaY}}function F(a){var b=a.length;if(1===b)return{x:lb(a[0].clientX),y:lb(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:lb(c/b),y:lb(d/b)}}function G(a,b,c){return{x:b/a||0,y:c/a||0}}function H(a,b){return a===b?Cb:mb(a)>=mb(b)?a>0?Db:Eb:b>0?Fb:Gb}function I(a,b,c){c||(c=Kb);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function J(a,b,c){c||(c=Kb);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function K(a,b){return J(b[1],b[0],Lb)-J(a[1],a[0],Lb)}function L(a,b){return I(b[0],b[1],Lb)/I(a[0],a[1],Lb)}function M(){this.evEl=Nb,this.evWin=Ob,this.allow=!0,this.pressed=!1,y.apply(this,arguments)}function N(){this.evEl=Rb,this.evWin=Sb,y.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function O(){this.evTarget=Ub,this.evWin=Vb,this.started=!1,y.apply(this,arguments)}function P(a,b){var c=t(a.touches),d=t(a.changedTouches);return b&(Ab|Bb)&&(c=u(c.concat(d),"identifier",!0)),[c,d]}function Q(){this.evTarget=Xb,this.targetIds={},y.apply(this,arguments)}function R(a,b){var c=t(a.touches),d=this.targetIds;if(b&(yb|zb)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=t(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return p(a.target,i)}),b===yb)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Ab|Bb)&&delete d[g[e].identifier],e++;return h.length?[u(f.concat(h),"identifier",!0),h]:void 0}function S(){y.apply(this,arguments);var a=k(this.handler,this);this.touch=new Q(this.manager,a),this.mouse=new M(this.manager,a)}function T(a,b){this.manager=a,this.set(b)}function U(a){if(q(a,bc))return bc;var b=q(a,cc),c=q(a,dc);return b&&c?cc+" "+dc:b||c?b?cc:dc:q(a,ac)?ac:_b}function V(a){this.id=w(),this.manager=null,this.options=i(a||{},this.defaults),this.options.enable=m(this.options.enable,!0),this.state=ec,this.simultaneous={},this.requireFail=[]}function W(a){return a&jc?"cancel":a&hc?"end":a&gc?"move":a&fc?"start":""}function X(a){return a==Gb?"down":a==Fb?"up":a==Db?"left":a==Eb?"right":""}function Y(a,b){var c=b.manager;return c?c.get(a):a}function Z(){V.apply(this,arguments)}function $(){Z.apply(this,arguments),this.pX=null,this.pY=null}function _(){Z.apply(this,arguments)}function ab(){V.apply(this,arguments),this._timer=null,this._input=null}function bb(){Z.apply(this,arguments)}function cb(){Z.apply(this,arguments)}function db(){V.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function eb(a,b){return b=b||{},b.recognizers=m(b.recognizers,eb.defaults.preset),new fb(a,b)}function fb(a,b){b=b||{},this.options=i(b,eb.defaults),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.element=a,this.input=z(this),this.touchAction=new T(this,this.options.touchAction),gb(this,!0),g(b.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function gb(a,b){var c=a.element;g(a.options.cssProps,function(a,d){c.style[v(c.style,d)]=b?a:""})}function hb(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var ib=["","webkit","moz","MS","ms","o"],jb=b.createElement("div"),kb="function",lb=Math.round,mb=Math.abs,nb=Date.now,ob=1,pb=/mobile|tablet|ip(ad|hone|od)|android/i,qb="ontouchstart"in a,rb=v(a,"PointerEvent")!==d,sb=qb&&pb.test(navigator.userAgent),tb="touch",ub="pen",vb="mouse",wb="kinect",xb=25,yb=1,zb=2,Ab=4,Bb=8,Cb=1,Db=2,Eb=4,Fb=8,Gb=16,Hb=Db|Eb,Ib=Fb|Gb,Jb=Hb|Ib,Kb=["x","y"],Lb=["clientX","clientY"];y.prototype={handler:function(){},init:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&o(this.element,this.evEl,this.domHandler),this.evTarget&&o(this.target,this.evTarget,this.domHandler),this.evWin&&o(x(this.element),this.evWin,this.domHandler)}};var Mb={mousedown:yb,mousemove:zb,mouseup:Ab},Nb="mousedown",Ob="mousemove mouseup";j(M,y,{handler:function(a){var b=Mb[a.type];b&yb&&0===a.button&&(this.pressed=!0),b&zb&&1!==a.which&&(b=Ab),this.pressed&&this.allow&&(b&Ab&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:vb,srcEvent:a}))}});var Pb={pointerdown:yb,pointermove:zb,pointerup:Ab,pointercancel:Bb,pointerout:Bb},Qb={2:tb,3:ub,4:vb,5:wb},Rb="pointerdown",Sb="pointermove pointerup pointercancel";a.MSPointerEvent&&(Rb="MSPointerDown",Sb="MSPointerMove MSPointerUp MSPointerCancel"),j(N,y,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Pb[d],f=Qb[a.pointerType]||a.pointerType,g=f==tb,h=s(b,a.pointerId,"pointerId");e&yb&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Ab|Bb)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Tb={touchstart:yb,touchmove:zb,touchend:Ab,touchcancel:Bb},Ub="touchstart",Vb="touchstart touchmove touchend touchcancel";j(O,y,{handler:function(a){var b=Tb[a.type];if(b===yb&&(this.started=!0),this.started){var c=P.call(this,a,b);b&(Ab|Bb)&&c[0].length-c[1].length===0&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:tb,srcEvent:a})}}});var Wb={touchstart:yb,touchmove:zb,touchend:Ab,touchcancel:Bb},Xb="touchstart touchmove touchend touchcancel";j(Q,y,{handler:function(a){var b=Wb[a.type],c=R.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:tb,srcEvent:a})}}),j(S,y,{handler:function(a,b,c){var d=c.pointerType==tb,e=c.pointerType==vb;if(d)this.mouse.allow=!1;else if(e&&!this.mouse.allow)return;b&(Ab|Bb)&&(this.mouse.allow=!0),this.callback(a,b,c)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Yb=v(jb.style,"touchAction"),Zb=Yb!==d,$b="compute",_b="auto",ac="manipulation",bc="none",cc="pan-x",dc="pan-y";T.prototype={set:function(a){a==$b&&(a=this.compute()),Zb&&(this.manager.element.style[Yb]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){l(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),U(a.join(" "))},preventDefaults:function(a){if(!Zb){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=q(d,bc),f=q(d,dc),g=q(d,cc);return e||f&&c&Hb||g&&c&Ib?this.preventSrc(b):void 0}},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var ec=1,fc=2,gc=4,hc=8,ic=hc,jc=16,kc=32;V.prototype={defaults:{},set:function(a){return h(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=Y(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=Y(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this))return this;var b=this.requireFail;return a=Y(a,this),-1===s(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this))return this;a=Y(a,this);var b=s(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(c.options.event+(b?W(d):""),a)}var c=this,d=this.state;hc>d&&b(!0),b(),d>=hc&&b(!0)},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=kc)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(kc|ec)))return!1;a++}return!0},recognize:function(a){var b=h({},a);return l(this.options.enable,[this,b])?(this.state&(ic|jc|kc)&&(this.state=ec),this.state=this.process(b),void(this.state&(fc|gc|hc|jc)&&this.tryEmit(b))):(this.reset(),void(this.state=kc))},process:function(){},getTouchAction:function(){},reset:function(){}},j(Z,V,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(fc|gc),e=this.attrTest(a);return d&&(c&Bb||!e)?b|jc:d||e?c&Ab?b|hc:b&fc?b|gc:fc:kc}}),j($,Z,{defaults:{event:"pan",threshold:10,pointers:1,direction:Jb},getTouchAction:function(){var a=this.options.direction,b=[];return a&Hb&&b.push(dc),a&Ib&&b.push(cc),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Hb?(e=0===f?Cb:0>f?Db:Eb,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Cb:0>g?Fb:Gb,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return Z.prototype.attrTest.call(this,a)&&(this.state&fc||!(this.state&fc)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=X(a.direction);b&&this.manager.emit(this.options.event+b,a),this._super.emit.call(this,a)}}),j(_,Z,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[bc]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&fc)},emit:function(a){if(this._super.emit.call(this,a),1!==a.scale){var b=a.scale<1?"in":"out";this.manager.emit(this.options.event+b,a)}}}),j(ab,V,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[_b]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Ab|Bb)&&!f)this.reset();else if(a.eventType&yb)this.reset(),this._timer=e(function(){this.state=ic,this.tryEmit()},b.time,this);else if(a.eventType&Ab)return ic;return kc},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===ic&&(a&&a.eventType&Ab?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=nb(),this.manager.emit(this.options.event,this._input)))}}),j(bb,Z,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[bc]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&fc)}}),j(cb,Z,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Hb|Ib,pointers:1},getTouchAction:function(){return $.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Hb|Ib)?b=a.velocity:c&Hb?b=a.velocityX:c&Ib&&(b=a.velocityY),this._super.attrTest.call(this,a)&&c&a.direction&&a.distance>this.options.threshold&&mb(b)>this.options.velocity&&a.eventType&Ab},emit:function(a){var b=X(a.direction);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),j(db,V,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[ac]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&yb&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=Ab)return this.failTimeout();var g=this.pTime?a.timeStamp-this.pTime<b.interval:!0,h=!this.pCenter||I(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;var i=this.count%b.taps;if(0===i)return this.hasRequireFailures()?(this._timer=e(function(){this.state=ic,this.tryEmit()},b.interval,this),fc):ic}return kc},failTimeout:function(){return this._timer=e(function(){this.state=kc},this.options.interval,this),kc},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ic&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),eb.VERSION="2.0.4",eb.defaults={domEvents:!1,touchAction:$b,enable:!0,inputTarget:null,inputClass:null,preset:[[bb,{enable:!1}],[_,{enable:!1},["rotate"]],[cb,{direction:Hb}],[$,{direction:Hb},["swipe"]],[db],[db,{event:"doubletap",taps:2},["tap"]],[ab]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var lc=1,mc=2;fb.prototype={set:function(a){return h(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?mc:lc},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&ic)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===mc||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(fc|gc|hc)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof V)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(f(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this))return this;var b=this.recognizers;return a=this.get(a),b.splice(s(b,a),1),this.touchAction.update(),this},on:function(a,b){var c=this.handlers;return g(r(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this},off:function(a,b){var c=this.handlers;return g(r(a),function(a){b?c[a].splice(s(c[a],b),1):delete c[a]}),this},emit:function(a,b){this.options.domEvents&&hb(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&gb(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},h(eb,{INPUT_START:yb,INPUT_MOVE:zb,INPUT_END:Ab,INPUT_CANCEL:Bb,STATE_POSSIBLE:ec,STATE_BEGAN:fc,STATE_CHANGED:gc,STATE_ENDED:hc,STATE_RECOGNIZED:ic,STATE_CANCELLED:jc,STATE_FAILED:kc,DIRECTION_NONE:Cb,DIRECTION_LEFT:Db,DIRECTION_RIGHT:Eb,DIRECTION_UP:Fb,DIRECTION_DOWN:Gb,DIRECTION_HORIZONTAL:Hb,DIRECTION_VERTICAL:Ib,DIRECTION_ALL:Jb,Manager:fb,Input:y,TouchAction:T,TouchInput:Q,MouseInput:M,PointerEventInput:N,TouchMouseInput:S,SingleTouchInput:O,Recognizer:V,AttrRecognizer:Z,Tap:db,Pan:$,Swipe:cb,Pinch:_,Rotate:bb,Press:ab,on:n,off:o,each:g,merge:i,extend:h,inherit:j,bindFn:k,prefixed:v}),typeof define==kb&&define.amd?define(function(){return eb}):"undefined"!=typeof module&&module.exports?module.exports=eb:a[c]=eb}(window,document,"Hammer");
//# sourceMappingURL=hammer.min.map

// tween.min.js
// tween.js v.0.15.0 https://github.com/sole/tween.js
void 0===Date.now&&(Date.now=function(){return(new Date).valueOf()});var TWEEN=TWEEN||function(){var n=[];return{REVISION:"14",getAll:function(){return n},removeAll:function(){n=[]},add:function(t){n.push(t)},remove:function(t){var r=n.indexOf(t);-1!==r&&n.splice(r,1)},update:function(t){if(0===n.length)return!1;var r=0;for(t=void 0!==t?t:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now();r<n.length;)n[r].update(t)?r++:n.splice(r,1);return!0}}}();TWEEN.Tween=function(n){var t=n,r={},i={},u={},o=1e3,e=0,a=!1,f=!1,c=!1,s=0,h=null,l=TWEEN.Easing.Linear.None,p=TWEEN.Interpolation.Linear,E=[],d=null,v=!1,I=null,w=null,M=null;for(var O in n)r[O]=parseFloat(n[O],10);this.to=function(n,t){return void 0!==t&&(o=t),i=n,this},this.start=function(n){TWEEN.add(this),f=!0,v=!1,h=void 0!==n?n:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now(),h+=s;for(var o in i){if(i[o]instanceof Array){if(0===i[o].length)continue;i[o]=[t[o]].concat(i[o])}r[o]=t[o],r[o]instanceof Array==!1&&(r[o]*=1),u[o]=r[o]||0}return this},this.stop=function(){return f?(TWEEN.remove(this),f=!1,null!==M&&M.call(t),this.stopChainedTweens(),this):this},this.stopChainedTweens=function(){for(var n=0,t=E.length;t>n;n++)E[n].stop()},this.delay=function(n){return s=n,this},this.repeat=function(n){return e=n,this},this.yoyo=function(n){return a=n,this},this.easing=function(n){return l=n,this},this.interpolation=function(n){return p=n,this},this.chain=function(){return E=arguments,this},this.onStart=function(n){return d=n,this},this.onUpdate=function(n){return I=n,this},this.onComplete=function(n){return w=n,this},this.onStop=function(n){return M=n,this},this.update=function(n){var f;if(h>n)return!0;v===!1&&(null!==d&&d.call(t),v=!0);var M=(n-h)/o;M=M>1?1:M;var O=l(M);for(f in i){var m=r[f]||0,N=i[f];N instanceof Array?t[f]=p(N,O):("string"==typeof N&&(N=m+parseFloat(N,10)),"number"==typeof N&&(t[f]=m+(N-m)*O))}if(null!==I&&I.call(t,O),1==M){if(e>0){isFinite(e)&&e--;for(f in u){if("string"==typeof i[f]&&(u[f]=u[f]+parseFloat(i[f],10)),a){var T=u[f];u[f]=i[f],i[f]=T}r[f]=u[f]}return a&&(c=!c),h=n+s,!0}null!==w&&w.call(t);for(var g=0,W=E.length;W>g;g++)E[g].start(n);return!1}return!0}},TWEEN.Easing={Linear:{None:function(n){return n}},Quadratic:{In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}},Cubic:{In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}},Quartic:{In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}},Quintic:{In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}},Sinusoidal:{In:function(n){return 1-Math.cos(n*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return.5*(1-Math.cos(Math.PI*n))}},Exponential:{In:function(n){return 0===n?0:Math.pow(1024,n-1)},Out:function(n){return 1===n?1:1-Math.pow(2,-10*n)},InOut:function(n){return 0===n?0:1===n?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)}},Circular:{In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}},Elastic:{In:function(n){var t,r=.1,i=.4;return 0===n?0:1===n?1:(!r||1>r?(r=1,t=i/4):t=i*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(n-=1))*Math.sin(2*(n-t)*Math.PI/i)))},Out:function(n){var t,r=.1,i=.4;return 0===n?0:1===n?1:(!r||1>r?(r=1,t=i/4):t=i*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*n)*Math.sin(2*(n-t)*Math.PI/i)+1)},InOut:function(n){var t,r=.1,i=.4;return 0===n?0:1===n?1:(!r||1>r?(r=1,t=i/4):t=i*Math.asin(1/r)/(2*Math.PI),(n*=2)<1?-.5*r*Math.pow(2,10*(n-=1))*Math.sin(2*(n-t)*Math.PI/i):r*Math.pow(2,-10*(n-=1))*Math.sin(2*(n-t)*Math.PI/i)*.5+1)}},Back:{In:function(n){var t=1.70158;return n*n*((t+1)*n-t)},Out:function(n){var t=1.70158;return--n*n*((t+1)*n+t)+1},InOut:function(n){var t=2.5949095;return(n*=2)<1?.5*n*n*((t+1)*n-t):.5*((n-=2)*n*((t+1)*n+t)+2)}},Bounce:{In:function(n){return 1-TWEEN.Easing.Bounce.Out(1-n)},Out:function(n){return 1/2.75>n?7.5625*n*n:2/2.75>n?7.5625*(n-=1.5/2.75)*n+.75:2.5/2.75>n?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return.5>n?.5*TWEEN.Easing.Bounce.In(2*n):.5*TWEEN.Easing.Bounce.Out(2*n-1)+.5}}},TWEEN.Interpolation={Linear:function(n,t){var r=n.length-1,i=r*t,u=Math.floor(i),o=TWEEN.Interpolation.Utils.Linear;return 0>t?o(n[0],n[1],i):t>1?o(n[r],n[r-1],r-i):o(n[u],n[u+1>r?r:u+1],i-u)},Bezier:function(n,t){var r,i=0,u=n.length-1,o=Math.pow,e=TWEEN.Interpolation.Utils.Bernstein;for(r=0;u>=r;r++)i+=o(1-t,u-r)*o(t,r)*n[r]*e(u,r);return i},CatmullRom:function(n,t){var r=n.length-1,i=r*t,u=Math.floor(i),o=TWEEN.Interpolation.Utils.CatmullRom;return n[0]===n[r]?(0>t&&(u=Math.floor(i=r*(1+t))),o(n[(u-1+r)%r],n[u],n[(u+1)%r],n[(u+2)%r],i-u)):0>t?n[0]-(o(n[0],n[0],n[1],n[1],-i)-n[0]):t>1?n[r]-(o(n[r],n[r],n[r-1],n[r-1],i-r)-n[r]):o(n[u?u-1:0],n[u],n[u+1>r?r:u+1],n[u+2>r?r:u+2],i-u)},Utils:{Linear:function(n,t,r){return(t-n)*r+n},Bernstein:function(n,t){var r=TWEEN.Interpolation.Utils.Factorial;return r(n)/r(t)/r(n-t)},Factorial:function(){var n=[1];return function(t){var r,i=1;if(n[t])return n[t];for(r=t;r>1;r--)i*=r;return n[t]=i}}(),CatmullRom:function(n,t,r,i,u){var o=.5*(r-n),e=.5*(i-t),a=u*u,f=u*a;return(2*t-2*r+o+e)*f+(-3*t+3*r-2*o-e)*a+o*u+t}}},"undefined"!=typeof module&&module.exports&&(module.exports=TWEEN);

var dir=new pc.Vec3,KeyframedCamera=pc.createScript("keyframedCamera");KeyframedCamera.attributes.add("speed",{type:"number",default:1}),KeyframedCamera.prototype.initialize=function(){this.sortedChildren=[],this.keyframe=0,this.cameraEntity=null,this.sortedChildren=this.entity.getChildren().splice(0).sort(function(t,e){return t.getName()<e.getName()?-1:t.getName()>e.getName()?1:0})},KeyframedCamera.prototype.attachCamera=function(t){this.cameraEntity=t,t.setPosition(this.sortedChildren[this.keyframe].getPosition()),t.setRotation(this.sortedChildren[this.keyframe].getRotation())},KeyframedCamera.prototype.detachCamera=function(){this.cameraEntity=null,this.keyframe=0},KeyframedCamera.prototype.postUpdate=function(t){if(this.cameraEntity){var e=this.sortedChildren,i=e.length,a=e[this.keyframe],r=e[(this.keyframe+1)%i];dir.sub2(r.getPosition(),a.getPosition());var s=dir.length(),n=this.cameraEntity.getPosition();n.add(dir.scale(this.speed*t/s)),this.cameraEntity.setPosition(n);var o=dir.sub2(n,a.getPosition()).length()/s,m=this.cameraEntity.getRotation();m.slerp(a.getRotation(),r.getRotation(),o),this.cameraEntity.setRotation(m),o>.99&&(this.cameraEntity.setPosition(r.getPosition()),this.cameraEntity.setRotation(r.getRotation()),this.keyframe=(this.keyframe+1)%i,this.keyframe===i-1&&this.fire("end"))}};var Music=pc.createScript("music");Music.prototype.initialize=function(){this.initialVolume=this.entity.sound.volume,this.targetVolume=this.initialVolume;var t=this;game.on("spinStart",function(){t.targetVolume=t.initialVolume/2}),game.on("spinEnd",function(){t.targetVolume=t.initialVolume})},Music.prototype.update=function(t){var i=this.entity.sound.volume;this.targetVolume!==i&&(this.entity.sound.volume=pc.math.lerp(i,this.targetVolume,2*t))};var Mechanism=pc.createScript("mechanism");Mechanism.attributes.add("multiplier",{type:"number",default:1}),Mechanism.prototype.initialize=function(){this.spinners=[];for(var t=1;t<=4;t++)this.spinners.push(this.app.root.findByName("Drum_0"+t).findByName("Symbol").script.delta);game.once("spinStart",function(){this.entity.sound.slot("Drum").play()}.bind(this))},Mechanism.prototype.postUpdate=function(t){for(var i=0,e=0;e<4;e++)i=Math.max(i,this.spinners[e].getDelta());this.entity.animation.speed=i*this.multiplier,this.entity.sound.volume=i*this.multiplier};var temp2=new pc.Vec2,Lever=pc.createScript("lever");Lever.attributes.add("sensitivity",{type:"number",default:.5}),Lever.attributes.add("returnSpeed",{type:"number",default:5}),Lever.prototype.initialize=function(){this.startTouch=0,this.currentTouch=0,this.isDragging=!1,this.disable=!0,this.reachedBottom=!1;var t=this.app;t.mouse.on("mousedown",this.onMouseDown,this),t.mouse.on("mousemove",this.onMouseMove,this),t.mouse.on("mouseup",this.onMouseUp,this),t.touch&&(t.touch.on("touchstart",this.onTouchStart,this),t.touch.on("touchmove",this.onTouchMove,this),t.touch.on("touchend",this.onTouchEnd,this)),game.on("play",function(){this.disable=!1}.bind(this)),game.on("spinStart",function(){this.disable=!0}.bind(this)),game.on("spinEnd",function(){this.disable=!1}.bind(this))},Lever.prototype.onMouseDown=function(t){0!==t.button||this.disable||(this.isDragging=!0,this.startTouch=t.y,this.currentTouch=this.startTouch)},Lever.prototype.onMouseMove=function(t){this.isDragging&&(this.currentTouch=t.y)},Lever.prototype.onMouseUp=function(t){0===t.button&&this.isDragging&&(this.isDragging=!1,this.releaseLever())},Lever.prototype.onTouchStart=function(t){var e=t.event;if(!(e.touches.length>1||this.disable)){this.isDragging=!0;var o=e.touches[0];this.startTouch=o.clientY,this.currentTouch=this.startTouch}},Lever.prototype.onTouchMove=function(t){var e=t.event;if(!(e.touches.length>1)){var o=e.touches[0];this.currentTouch=o.clientY}},Lever.prototype.onTouchEnd=function(t){0===t.event.touches.length&&this.isDragging&&(this.isDragging=!1,this.releaseLever())},Lever.prototype.dragLever=function(){if(!this.reachedBottom){var t=pc.math.clamp((this.currentTouch-this.startTouch)*this.sensitivity,0,90);this.entity.setLocalEulerAngles(t,0,0),t>85&&(this.reachedBottom=!0,game.playSound("Lock"))}},Lever.prototype.releaseLever=function(){this.reachedBottom&&(this.reachedBottom=!1,game.playSound("Lever"),this.fire("leverPulled"))},Lever.prototype.returnLever=function(t){var e=this.entity.getLocalEulerAngles();e.x=pc.math.lerp(e.x,0,t*this.returnSpeed),this.entity.setLocalEulerAngles(e)},Lever.prototype.update=function(t){this.isDragging?this.dragLever():this.returnLever(t)};pc.Vec3.prototype.setRandomInSphere=function(t){t=t||1;var e=Math.random()*t,a=Math.random()*Math.PI,i=Math.random()*Math.PI*2,o=e*Math.cos(i)*Math.sin(a),s=e*Math.sin(i)*Math.sin(a),n=e*Math.cos(a);return this.set(o,s,n)};var Shake=pc.createScript("shake");Shake.attributes.add("duration",{type:"number",default:1}),Shake.attributes.add("amount",{type:"number",default:.7}),Shake.prototype.initialize=function(){this.offset=new pc.Vec3,this.originalPos=this.entity.getLocalPosition().clone()},Shake.prototype.doShake=function(){this.timer=this.duration},Shake.prototype.postUpdate=function(t){this.entity.setLocalPosition(this.originalPos),this.timer>0&&(this.offset.setRandomInSphere().scale(this.amount*this.timer),this.entity.translateLocal(this.offset),this.timer-=t)};for(var SYMBOL_COUNT=12,DISTINCT_SYMBOL_COUNT=3,INITIAL_SYMBOL_POSITION=36,SYMBOL_SPACING=360/SYMBOL_COUNT,OVERSPIN=360,DELAY_FACTOR=.4,SPIN_DURATION=3,SPIN_EASING=1,SPIN_INOUT=2,RANDOMNESS=[],RANDOMNESS_INDEX=0,getRandomSymbolIndex=function(){return Math.floor(Math.random()*SYMBOL_COUNT)},times=0;times<4;times++){for(var i=0;i<8;i++)RANDOMNESS.push(getRandomSymbolIndex());for(var randomSymbol=getRandomSymbolIndex(),j=0;j<4;j++)RANDOMNESS.push(randomSymbol)}var Spin=pc.createScript("spin");Spin.attributes.add("speed",{type:"number",default:20}),Spin.attributes.add("delayOrder",{type:"number",default:0}),Spin.prototype.initialize=function(){this.entity.setLocalEulerAngles(INITIAL_SYMBOL_POSITION,0,0)},Spin.prototype.getTargetAngleForSymbolIndex=function(t){return OVERSPIN*(this.delayOrder+1)+INITIAL_SYMBOL_POSITION+t*SYMBOL_SPACING},Spin.prototype.getTargetAngleForRandomSymbol=function(){return this.getTargetAngleForSymbolIndex(getRandomSymbolIndex())},Spin.prototype.spinToSymbolAtIndex=function(t){var e=this.entity.script.tween,n=this.getTargetAngleForSymbolIndex(t);e.startRot=this.entity.getLocalEulerAngles(),e.endRot=new pc.Vec3(n,0,0),e.easing=SPIN_EASING,e.duration=SPIN_DURATION,e.startTime=DELAY_FACTOR*this.delayOrder,e.createTween().onComplete(function(){this.fire("spinFinished",t%DISTINCT_SYMBOL_COUNT)}.bind(this))},Spin.prototype.spinToRandomSymbol=function(){var t=RANDOMNESS[RANDOMNESS_INDEX];RANDOMNESS_INDEX=(RANDOMNESS_INDEX+1)%RANDOMNESS.length,this.spinToSymbolAtIndex(t)};var easingFuncs=[[TWEEN.Easing.Linear.None,TWEEN.Easing.Linear.None,TWEEN.Easing.Linear.None],[TWEEN.Easing.Quadratic.In,TWEEN.Easing.Quadratic.Out,TWEEN.Easing.Quadratic.InOut],[TWEEN.Easing.Cubic.In,TWEEN.Easing.Cubic.Out,TWEEN.Easing.Cubic.InOut],[TWEEN.Easing.Quartic.In,TWEEN.Easing.Quartic.Out,TWEEN.Easing.Quartic.InOut],[TWEEN.Easing.Quintic.In,TWEEN.Easing.Quintic.Out,TWEEN.Easing.Quintic.InOut],[TWEEN.Easing.Sinusoidal.In,TWEEN.Easing.Sinusoidal.Out,TWEEN.Easing.Sinusoidal.InOut],[TWEEN.Easing.Exponential.In,TWEEN.Easing.Exponential.Out,TWEEN.Easing.Exponential.InOut],[TWEEN.Easing.Circular.In,TWEEN.Easing.Circular.Out,TWEEN.Easing.Circular.InOut],[TWEEN.Easing.Elastic.In,TWEEN.Easing.Elastic.Out,TWEEN.Easing.Elastic.InOut],[TWEEN.Easing.Back.In,TWEEN.Easing.Back.Out,TWEEN.Easing.Back.InOut],[TWEEN.Easing.Bounce.In,TWEEN.Easing.Bounce.Out,TWEEN.Easing.Bounce.InOut]],Tween=pc.createScript("tween");Tween.attributes.add("startTime",{type:"number",default:0}),Tween.attributes.add("duration",{type:"number",default:1}),Tween.attributes.add("startPos",{type:"vec3",default:[0,0,0]}),Tween.attributes.add("endPos",{type:"vec3",default:[0,0,0]}),Tween.attributes.add("startRot",{type:"vec3",default:[0,0,0]}),Tween.attributes.add("endRot",{type:"vec3",default:[0,0,0]}),Tween.attributes.add("startScale",{type:"vec3",default:[1,1,1]}),Tween.attributes.add("endScale",{type:"vec3",default:[1,1,1]}),Tween.attributes.add("easing",{type:"number",enum:[{Linear:0},{Quadratic:1},{Cubic:2},{Quartic:3},{Quintic:4},{Sinusoidal:5},{Exponential:6},{Circular:7},{Elastic:8},{Back:9},{Bounce:10}]}),Tween.attributes.add("inOut",{type:"number",enum:[{In:0},{Out:1},{InOut:2}]}),Tween.prototype.initialize=function(){this.timer=this.startTime,this.startPos.copy(this.entity.getPosition()),this.startRot.copy(this.entity.getEulerAngles()),this.startScale.copy(this.entity.getLocalScale()),this.endPos.copy(this.entity.getPosition()),this.endRot.copy(this.entity.getEulerAngles()),this.endScale.copy(this.entity.getLocalScale()),this.createTween(),this.on("attr",function(t,i,e){this.createTween()})},Tween.prototype.createTween=function(){var t=this.entity;return this.started=!1,this.timer=this.startTime,this.tween=new TWEEN.Tween({px:this.startPos.x,py:this.startPos.y,pz:this.startPos.z,rx:this.startRot.x,ry:this.startRot.y,rz:this.startRot.z,sx:this.startScale.x,sy:this.startScale.y,sz:this.startScale.z}).to({px:this.endPos.x,py:this.endPos.y,pz:this.endPos.z,rx:this.endRot.x,ry:this.endRot.y,rz:this.endRot.z,sx:this.endScale.x,sy:this.endScale.y,sz:this.endScale.z},Math.floor(1e3*this.duration)).easing(easingFuncs[this.easing][this.inOut]).onUpdate(function(){t.setPosition(this.px,this.py,this.pz),t.setEulerAngles(this.rx,this.ry,this.rz),t.setLocalScale(this.sx,this.sy,this.sz)}),this.tween},Tween.prototype.update=function(t){this.timer-=t,this.timer<=0&&!this.started&&(this.tween.start(),this.started=!0)};var Camera=pc.createScript("camera");Camera.attributes.add("maxElevation",{type:"number",title:"Max Elevation",default:70}),Camera.prototype.initialize=function(){this.viewPos=new pc.Vec3,this.targetViewPos=new pc.Vec3,this.tempVec=new pc.Vec3,this.distance=3,this.targetDistance=3,this.rotX=-180,this.rotY=0,this.targetRotX=-40,this.targetRotY=30,this.quatX=new pc.Quat,this.quatY=new pc.Quat,this.transformStarted=!1,this.app.mouse.disableContextMenu(),this.setBestCameraPositionForModel();var t,e,a;this.hammer=Hammer(this.app.graphicsDevice.canvas,{prevent_default:!0,drag_max_touches:2,transform_min_scale:.08,transform_min_rotation:180,transform_always_block:!0,hold:!1,release:!1,swipe:!1,tap:!1}),this.hammer.on("transformstart",function(e){this.transformStarted=!0,t=this.targetDistance,e.preventDefault(),this.hammer.options.drag=!1}.bind(this)),this.hammer.on("transformend",function(t){this.transformStarted=!1,this.hammer.options.drag=!0}.bind(this)),this.hammer.on("transform",function(e){if(this.transformStarted){var a=e.gesture.scale;this.targetDistance=t/a}}.bind(this)),this.hammer.on("dragstart",function(t){if(!this.transformStarted){var s=t.gesture,i=void 0!==s.touches?s.touches.length:1;this.panning=2===i,this.dragStarted=!0,e=s.center.pageX,a=s.center.pageY}}.bind(this)),this.hammer.on("dragend",function(t){this.dragStarted&&(this.dragStarted=!1,this.panning=!1)}.bind(this)),this.hammer.on("drag",function(t){var s=t.gesture,i=s.center.pageX-e,r=s.center.pageY-a;this.panning?this.pan(-.025*i,.025*r):this.orbit(.5*i,.5*r),e=s.center.pageX,a=s.center.pageY}.bind(this)),this.app.mouse.on(pc.EVENT_MOUSEMOVE,this.onMouseMove,this),this.app.mouse.on(pc.EVENT_MOUSEWHEEL,this.onMouseWheel,this)},Camera.prototype.setBestCameraPositionForModel=function(){var t,e,a=this.app.scene.getModels(),s=function(t){for(var e=t.node.getParent();e;){if(e.camera)return!0;e=e.getParent()}return!1},i=[];for(t=0;t<a.length;t++){var r=a[t].meshInstances;for(e=0;e<r.length;e++)s(r[e])||i.push(r[e])}if(i.length>0){var n=new pc.shape.Aabb;for(n.copy(i[0].aabb),t=0;t<i.length;t++)n.add(i[t].aabb);var o=n.center,h=n.halfExtents.y,c=n.halfExtents.z,p=1.5*h/Math.tan(.5*this.entity.camera.fov*Math.PI/180);this.reset(o,p+c)}else this.reset(pc.Vec3.ZERO,3)},Camera.prototype.reset=function(t,e){this.viewPos.copy(t),this.targetViewPos.copy(t),this.distance=e,this.targetDistance=e,this.rotX=-180,this.rotY=0,this.targetRotX=-40,this.targetRotY=30},Camera.prototype.pan=function(t,e){this.tempVec.copy(this.entity.right).scale(t),this.targetViewPos.add(this.tempVec),this.tempVec.copy(this.entity.up).scale(e),this.targetViewPos.add(this.tempVec)},Camera.prototype.dolly=function(t){this.targetDistance+=t,this.targetDistance<0&&(this.targetDistance=0)},Camera.prototype.orbit=function(t,e){this.targetRotX+=t,this.targetRotY+=e,this.targetRotY=pc.math.clamp(this.targetRotY,-this.maxElevation,this.maxElevation)},Camera.prototype.onMouseWheel=function(t){t.event.preventDefault(),this.dolly(-.25*t.wheel)},Camera.prototype.onMouseMove=function(t){if(t.buttons[pc.MOUSEBUTTON_LEFT])this.orbit(.2*t.dx,.2*t.dy);else if(t.buttons[pc.MOUSEBUTTON_RIGHT]){var e=this.distance/700;this.pan(t.dx*-e,t.dy*e)}},Camera.prototype.update=function(t){this.app.keyboard.wasPressed(pc.KEY_SPACE)&&this.setBestCameraPositionForModel(),this.viewPos.lerp(this.viewPos,this.targetViewPos,t/.1),this.distance=pc.math.lerp(this.distance,this.targetDistance,t/.2),this.rotX=pc.math.lerp(this.rotX,this.targetRotX,t/.2),this.rotY=pc.math.lerp(this.rotY,this.targetRotY,t/.2),this.quatX.setFromAxisAngle(pc.Vec3.RIGHT,-this.rotY),this.quatY.setFromAxisAngle(pc.Vec3.UP,-this.rotX),this.quatY.mul(this.quatX),this.entity.setPosition(this.viewPos),this.entity.setRotation(this.quatY),this.entity.translateLocal(0,0,this.distance)};var CoinDrop=pc.createScript("coinDrop");CoinDrop.prototype.initialize=function(){var n=this.entity.animation,i=this.entity.sound;game.on("win",function(){n.play("DropCoins.json"),n.currentTime=0,n.speed=1,i.slot("Coins").play()}),game.on("spinStart",function(){n.speed=0,n.currentTime=0})};var Game=pc.createScript("game");Game.prototype.initialize=function(){this.spinners=[],window.game=this,this.lever=this.app.root.findByName("Lever").script.lever.on("leverPulled",this.spin,this);for(var i=1;i<=4;i++){var n=this.app.root.findByName("Drum_0"+i).findByName("Symbol").script.spin;this.spinners.push(n)}},Game.prototype.play=function(){game.fire("play")},Game.prototype.spin=function(){this.fire("spinStart");var i=this.spinners.length,n=null,t=!0,e=function(e){this.playSound("Lock"),null===n?n=e:n!==e&&(t=!1),--i<=0&&(t?(this.fire("win"),this.playSound("Win"),setTimeout(function(){this.fire("spinEnd")}.bind(this),3e3)):(this.fire("lose"),this.fire("spinEnd")))}.bind(this);this.spinners.forEach(function(i){i.spinToRandomSymbol(),i.once("spinFinished",e)})},Game.prototype.playSound=function(i){this.entity.sound.slot(i).play()};var Delta=pc.createScript("delta");Delta.prototype.initialize=function(){this.lastUp=this.entity.up.clone(),this.currUp=this.entity.up.clone()},Delta.prototype.getDelta=function(){return Math.acos(pc.math.clamp(this.currUp.dot(this.lastUp),-1,1))},Delta.prototype.update=function(t){this.lastUp.copy(this.currUp),this.currUp.copy(this.entity.up)};var GodScript=pc.createScript("godScript");GodScript.prototype.initialize=function(){for(var t=this.entity.model.meshInstances,e=0;e<t.length;e++){var i=t[e].material;i.lightMapUv=0,i.occludeSpecularIntensity=.35,i.update()}};var ParticlesManager=pc.createScript("particlesManager");ParticlesManager.prototype.initialize=function(){this.motorLeft=this.entity.findByName("MotorLeft").particlesystem,this.motorRight=this.entity.findByName("MotorRight").particlesystem;var t=this;game.on("spinStart",function(){t.motorLeft.loop=!0,t.motorLeft.play(),t.motorRight.loop=!0,t.motorRight.play()}),game.on("spinEnd",function(){t.motorLeft.loop=!1,t.motorLeft.stop(),t.motorRight.loop=!1,t.motorRight.stop()})};var TweenManager=pc.createScript("tweenManager");TweenManager.prototype.update=function(e){TWEEN.update()};var UI=pc.createScript("ui");UI.prototype.initialize=function(){var t=document.createElement("style");t.type="text/css",t.innerHTML=["@media (min-width: 0px) {","#playBtn { ","   position: absolute;","   top: calc(50% - 64px);","   left: calc(50% - 121px);","   cursor: pointer;","   opacity: 0.75;","   -webkit-touch-callout: none;","   -webkit-user-select: none;","   -khtml-user-select: none;","   -moz-user-select: none;","   -ms-user-select: none;","   user-select: none;","}","#playBtn:hover { ","   opacity: 1;","}","#play { ","   position: absolute;","   left: 2px;","}","#cog { ","   -webkit-transition: all 1s;","   -moz-transition: all 1s;","   -o-transition: all 1s;","   transition: all 1s;","   -webkit-transform: rotate(0deg);","   -moz-transform: rotate(0deg);","   -ms-transform: rotate(0deg);","   -o-transform: rotate(0deg);","   transform: rotate(0deg);","}","#cog.active { ","   -webkit-transform: rotate(180deg);","   -moz-transform: rotate(180deg);","   -ms-transform: rotate(180deg);","   -o-transform: rotate(180deg);","   transform: rotate(180deg);","}","}","@media (min-width: 768px) {","#playBtn { ","   left: 10%;","}","}"].join("\n"),document.getElementsByTagName("head")[0].appendChild(t);var e=document.createElement("div");e.id="playBtn";var a=document.createElement("img");a.id="cog",a.src="https://s3-eu-west-1.amazonaws.com/steampunkslots.playcanvas.com/justcog.png",e.appendChild(a);var o=document.createElement("img");o.id="play",o.src="https://s3-eu-west-1.amazonaws.com/steampunkslots.playcanvas.com/justplay.png",e.appendChild(o),document.body.appendChild(e),e.addEventListener("click",function(){game.playSound("Lever"),a.classList.add("active"),setTimeout(function(){game.play(),e.style.display="none"},1e3)})};var CameraManager=pc.createScript("cameraManager");CameraManager.prototype.initialize=function(){this.currentKeyframe=0;var e=this.app.root.findByName("Locators");this.intro=e.findByName("Intro"),this.reels=e.findByName("Reels"),this.pull=e.findByName("Pull"),this.coinDrop=e.findByName("Coin Drop"),this.keyframes=e.findByName("Keyframes").getChildren().map(function(e){return e.script.keyframedCamera});var t=this;game.on("win",function(){t.moveCamera(t.coinDrop),t.shakeCamera()}),game.on("play",function(){t.moveCamera(t.getReelsLocator())}),game.on("spinStart",function(){setTimeout(function(){t.moveCamera(t.getReelsLocator())},500)}),game.on("spinEnd",function(){t.moveCamera(t.getReelsLocator())})},CameraManager.prototype.postInitialize=function(){this.useKeyframedCamera()},CameraManager.prototype.getReelsLocator=function(){return document.body.clientWidth/document.body.clientHeight<1?this.pull:this.reels},CameraManager.prototype.moveCamera=function(e){this.keyframes[this.currentKeyframe].detachCamera(),this.entity.script.enabled=!0;var t=this.entity.script.tween;return t.startPos=this.entity.getPosition(),t.endPos=e.getPosition(),t.startRot=this.entity.getEulerAngles(),t.endRot=e.getEulerAngles(),t.createTween()},CameraManager.prototype.useKeyframedCamera=function(){this.entity.script.enabled=!1,this.keyframes[this.currentKeyframe].attachCamera(this.entity),this.keyframes[this.currentKeyframe].once("end",function(){this.keyframes[this.currentKeyframe].detachCamera(),this.currentKeyframe=(this.currentKeyframe+1)%this.keyframes.length,this.useKeyframedCamera()}.bind(this))},CameraManager.prototype.shakeCamera=function(){this.entity.findByName("Camera").script.shake.doShake()};